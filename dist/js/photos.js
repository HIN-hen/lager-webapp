let viewMode=document.getElementById("viewMode"),localStorageViewMode=localStorage.getItem("photos-view-mode"),isGridView=document.getElementById("mode-grid-view"),isTableView=document.getElementById("mode-table-view"),gridView=document.querySelector("#gridView"),tableView=document.querySelector("#tableView"),allActualPhotos=document.querySelectorAll("#tableView img"),viewPort=document.getElementById("viewPort"),viewPortContent=null,monthYearSelector=document.getElementById("monthYearSelector"),lastMonthToSelect=null,getAllPhotosAsArrayWithoutUrl=()=>Array.from(allActualPhotos).map(e=>e.getAttribute("src")),getAllAvailableDates=()=>{var t=[];for(let e=0;e<viewPortContent.length;e++){var o=viewPortContent[e],o=o.id.substring(o.id.indexOf(".")+1);t.push(o)}var e=[...new Set(t)];e.forEach(e=>{var t=document.createElement("option");t.value=e,t.text=e,monthYearSelector.appendChild(t)}),lastMonthToSelect=e[0]},monthYearLocalStorage=localStorage.getItem("monthYear"),theme=(monthYearSelector.value=null!==monthYearLocalStorage?monthYearLocalStorage:"show_all",monthYearSelector.addEventListener("change",e=>{var t=e.target.value;localStorage.setItem("monthYear",t);for(let e=0;e<viewPortContent.length;e++){var o=viewPortContent[e];t===o.id.substring(o.id.indexOf(".")+1)||"show_all"===t?o.classList.remove("d-none"):o.classList.add("d-none")}}),document.querySelector("html")),switchButton=document.querySelector("#themeSwitcher > button"),deletePhoto=(theme.setAttribute("data-theme",localStorage.getItem("theme")),switchButton.classList.add(localStorage.getItem("theme")),switchButton.addEventListener("click",e=>{"dark"===e.target.getAttribute("class")?(localStorage.setItem("theme","light"),theme.setAttribute("data-theme","light"),switchButton.classList.add("light"),switchButton.classList.remove("dark")):(localStorage.setItem("theme","dark"),theme.setAttribute("data-theme","dark"),switchButton.classList.add("dark"),switchButton.classList.remove("light"))}),async e=>{var e=e.split(","),t=+e[0],e=e[1];let o=await viewPortContent[t];fetch("api/photos/delete",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify([e])}).then(()=>o.remove(),showSnackBar("Photo has been deleted.")).catch(e=>console.log(e.message))}),deleteAllPhotos=()=>{var e=getAllPhotosAsArrayWithoutUrl();fetch("api/photos/delete",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(()=>location.reload()).catch(e=>console.log(e.message))},setTableViewMode=()=>{viewPortContent=viewPort.querySelector("tbody").querySelectorAll("tr"),localStorage.setItem("photos-view-mode","mode-table-view"),tableView.classList.remove("d-none"),gridView.classList.add("d-none"),isGridView.removeAttribute("checked"),isTableView.setAttribute("checked","checked")},setGridViewMode=()=>{viewPortContent=viewPort.querySelectorAll("article"),localStorage.setItem("photos-view-mode","mode-grid-view"),gridView.classList.remove("d-none"),tableView.classList.add("d-none"),isTableView.removeAttribute("checked"),isGridView.setAttribute("checked","checked")},formatDateToDownloadDesignation=(viewMode.addEventListener("change",e=>{e=e.target.id;("mode-table-view"===e?setTableViewMode:setGridViewMode)(),location.reload()}),e=>{var t=e.target.id,t=t.split(".")[0],t=new Date(parseInt(t)).toISOString(),t=t.substring(0,t.lastIndexOf(":")).replace("T","_").replaceAll("-","_");e.target.setAttribute("download",t)});document.addEventListener("DOMContentLoaded",()=>{(null!==localStorageViewMode&&"mode-table-view"===localStorageViewMode?setTableViewMode:setGridViewMode)(),getAllAvailableDates(),monthYearSelector.value=monthYearLocalStorage||lastMonthToSelect,monthYearSelector.dispatchEvent(new Event("change"))}),window.lazyLoadOptions={};