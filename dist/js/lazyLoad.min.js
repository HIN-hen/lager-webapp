((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).LazyLoad=t()})(this,function(){function a(e,t){let a;var l="LazyLoad::Initialized",t=new e(t);try{a=new CustomEvent(l,{detail:{instance:t}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent(l,!1,!1,{instance:t})}window.dispatchEvent(a)}function e(e,t){var l,r,a,s,e=i(e);this._settings=e,this.loadingCount=0,a=e,s=this,ue(a)||(s._observer=new IntersectionObserver(e=>{ge(e,a,s)},{root:a.container===document?null:a.container,rootMargin:a.thresholds||a.threshold+"px"})),l=e,r=this,n&&(r._onlineHandler=()=>{var t,e,a;t=l,e=r,a=G(t),be(a).filter(ve).forEach(e=>{I(e,t.class_error),h(e)}),e.update()},window.addEventListener("online",r._onlineHandler)),this.update(t)}let n="undefined"!=typeof window,l=n&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),o=n&&1<window.devicePixelRatio,t={elements_selector:".lazy",container:l||n?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},i=e=>Object.assign({},t,e),d="src",r="srcset",s="sizes",H="poster",c="llOriginalAttrs",V="data",_="loading",F="loaded",j="applied",u="error",B="native",J="data-",S="ll-status",g=(e,t)=>e.getAttribute(J+t),b=e=>g(e,S),v=(e,t)=>{var a=S;a=J+a,null!==t?e.setAttribute(a,t):e.removeAttribute(a)},h=e=>v(e,null),m=e=>null===b(e),p=e=>b(e)===B,P=[_,F,j,u],f=(e,t,a,l)=>{e&&"function"==typeof e&&(void 0===l?void 0===a?e(t):e(t,a):e(t,a,l))},E=(e,t)=>{n&&""!==t&&e.classList.add(t)},I=(e,t)=>{n&&""!==t&&e.classList.remove(t)},U=e=>e.llTempImage,y=(e,t)=>{t&&(t=t._observer)&&t.unobserve(e)},k=(e,t)=>{e&&(e.loadingCount+=t)},$=(e,t)=>{e&&(e.toLoadCount=t)},q=a=>{var l=[];for(let e,t=0;e=a.children[t];t+=1)"SOURCE"===e.tagName&&l.push(e);return l},A=(e,t)=>{e=e.parentNode;e&&"PICTURE"===e.tagName&&q(e).forEach(t)},K=(e,t)=>{q(e).forEach(t)},L=[d],Q=[d,H],w=[d,r,s],W=[V],x=e=>!!e[c],X=e=>e[c],Y=e=>delete e[c],C=(a,e)=>{if(!x(a)){let t={};e.forEach(e=>{t[e]=a.getAttribute(e)}),a[c]=t}},O=(r,e)=>{if(x(r)){let l=X(r);e.forEach(e=>{var t,a;t=r,a=e,(e=l[e])?t.setAttribute(a,e):t.removeAttribute(a)})}},Z=(e,t,a)=>{E(e,t.class_applied),v(e,j),a&&(t.unobserve_completed&&y(e,t),f(t.callback_applied,e,a))},ee=(e,t,a)=>{E(e,t.class_loading),v(e,_),a&&(k(a,1),f(t.callback_loading,e,a))},M=(e,t,a)=>{a&&e.setAttribute(t,a)},te=(e,t)=>{M(e,s,g(e,t.data_sizes)),M(e,r,g(e,t.data_srcset)),M(e,d,g(e,t.data_src))},ae={IMG:(e,t)=>{A(e,e=>{C(e,w),te(e,t)}),C(e,w),te(e,t)},IFRAME:(e,t)=>{C(e,L),M(e,d,g(e,t.data_src))},VIDEO:(e,t)=>{K(e,e=>{C(e,L),M(e,d,g(e,t.data_src))}),C(e,Q),M(e,H,g(e,t.data_poster)),M(e,d,g(e,t.data_src)),e.load()},OBJECT:(e,t)=>{C(e,W),M(e,V,g(e,t.data_src))}},le=["IMG","IFRAME","VIDEO","OBJECT"],re=(e,t)=>{!t||0<t.loadingCount||0<t.toLoadCount||f(e.callback_finish,t)},se=(e,t,a)=>{e.addEventListener(t,a),e.llEvLisnrs[t]=a},ne=(e,t,a)=>{e.removeEventListener(t,a)},z=e=>!!e.llEvLisnrs,N=e=>{if(z(e)){var t,a=e.llEvLisnrs;for(t in a){var l=a[t];ne(e,t,l)}delete e.llEvLisnrs}},ie=(e,t,a)=>{delete e.llTempImage,k(a,-1),a&&--a.toLoadCount,I(e,t.class_loading),t.unobserve_completed&&y(e,a)},T=(n,i,o)=>{let d=U(n)||n;var e,t;z(d)||(e=d,z(e)||(e.llEvLisnrs={}),t="VIDEO"===e.tagName?"loadeddata":"load",se(e,t,e=>{{var t=0;var a=n;var l=i;var r=o;const s=p(a);ie(a,l,r),E(a,l.class_loaded),v(a,F),f(l.callback_loaded,a,r),s||re(l,r)}N(d)}),se(e,"error",e=>{{var t=0;var a=n;var l=i;var r=o;const s=p(a);ie(a,l,r),E(a,l.class_error),v(a,u),f(l.callback_error,a,r),l.restore_on_error&&O(a,w),s||re(l,r)}N(d)}))},R=(e,t,a)=>{var l,r,s,n,i;i=e,-1<le.indexOf(i.tagName)?(i=e,r=t,s=a,T(i,r,s),i=i,r=r,s=s,(n=ae[i.tagName])&&(n(i,r),ee(i,r,s))):(n=t,i=a,(r=e).llTempImage=document.createElement("IMG"),T(r,n,i),s=r,x(s)||(s[c]={backgroundImage:s.style.backgroundImage}),s=r,t=n,a=i,e=g(s,t.data_bg),l=g(s,t.data_bg_hidpi),(l=o&&l?l:e)&&(s.style.backgroundImage=`url("${l}")`,U(s).setAttribute(d,l),ee(s,t,a)),e=r,l=n,s=i,t=g(e,l.data_bg_multi),a=g(e,l.data_bg_multi_hidpi),(a=o&&a?a:t)&&(e.style.backgroundImage=a,Z(e,l,s)),t=r,a=n,e=i,(l=g(t,a.data_bg_set))&&(l=l.split("|").map(e=>`image-set(${e})`),t.style.backgroundImage=l.join(),Z(t,a,e)))},oe=e=>{e.removeAttribute(d),e.removeAttribute(r),e.removeAttribute(s)},de=e=>{A(e,e=>{O(e,w)}),O(e,w)},ce={IMG:de,IFRAME:e=>{O(e,L)},VIDEO:e=>{K(e,e=>{O(e,L)}),O(e,Q),e.load()},OBJECT:e=>{O(e,W)}},_e=["IMG","IFRAME","VIDEO"],ue=e=>e.use_native&&"loading"in HTMLImageElement.prototype,ge=(e,d,c)=>{e.forEach(e=>{return e.isIntersecting||0<e.intersectionRatio?(a=e.target,l=e,r=d,s=c,o=a,o=0<=P.indexOf(b(o)),v(a,"entered"),E(a,r.class_entered),I(a,r.class_exited),n=a,i=s,r.unobserve_entered&&y(n,i),f(r.callback_enter,a,l,s),void(o||R(a,r,s))):(n=e.target,i=e,l=d,o=c,void(m(n)||(E(n,l.class_exited),a=n,r=i,s=o,(e=l).cancel_on_exit&&(t=a,b(t)===_)&&"IMG"===a.tagName&&(N(a),t=a,A(t,e=>{oe(e)}),oe(t),de(a),I(a,e.class_loading),k(s,-1),h(a),f(e.callback_cancel,a,r,s)),f(l.callback_exit,n,i,o))));var t,a,l,r,s,n,i,o})},be=e=>Array.prototype.slice.call(e),G=e=>e.container.querySelectorAll(e.elements_selector),ve=e=>(e=e,b(e)===u),he=(e,t)=>(e=e||G(t),be(e).filter(m));if(e.prototype={update:function(e){var t,r,s,a=this._settings,e=he(e,a);$(this,e.length),l?this.loadAll(e):ue(a)?(r=a,s=this,e.forEach(e=>{var t,a,l;-1!==_e.indexOf(e.tagName)&&(t=r,a=s,(e=e).setAttribute("loading","lazy"),T(e,t,a),a=e,t=t,(l=ae[a.tagName])&&l(a,t),v(e,B))}),$(s,0)):(a=e,(e=this._observer).disconnect(),t=e,a.forEach(e=>{t.observe(e)}))},destroy:function(){this._observer&&this._observer.disconnect(),n&&window.removeEventListener("online",this._onlineHandler),G(this._settings).forEach(e=>{Y(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){let t=this._settings;he(e,t).forEach(e=>{y(e,this),R(e,t,this)})},restoreAll:function(){let r=this._settings;G(r).forEach(e=>{var t,a,l;e=e,t=r,a=e,(l=ce[a.tagName])?l(a):(l=a,x(l)&&(a=X(l),l.style.backgroundImage=a.backgroundImage)),l=e,a=t,m(l)||p(l)||(I(l,a.class_entered),I(l,a.class_exited),I(l,a.class_applied),I(l,a.class_loading),I(l,a.class_loaded),I(l,a.class_error)),h(e),Y(e)})}},e.load=(e,t)=>{t=i(t);R(e,t)},e.resetStatus=e=>{h(e)},n){var me=e,D=window.lazyLoadOptions;if(D)if(D.length)for(let e,t=0;e=D[t];t+=1)a(me,e);else a(me,D)}return e});