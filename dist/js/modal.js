let isOpenClass="modal-is-open",openingClass="modal-is-opening",closingClass="modal-is-closing",scrollbarWidthCssVar="--pico-scrollbar-width",animationDuration=400,title=document.querySelector(".title"),photo=document.querySelector(".photo"),download=document.querySelector(".download-image"),visibleModal=null,modalData=null,modalTarget=null,titleConfirm=document.querySelector(".titleConfirm"),contentConfirm=document.querySelector(".contentConfirm"),toggleModal=t=>{t.preventDefault();var e=document.getElementById(t.currentTarget.dataset.target),t=t.currentTarget;modalTarget=t.getAttribute("data-target"),modalData={title:t.getAttribute("data-title"),content:t.getAttribute("data-content"),src:t.src||t.getAttribute("data-image")},e&&(e.open?closeModal:openModal)(e)},createContent=async()=>{"confirm-modal"===modalTarget&&(titleConfirm.innerHTML=modalData.title,contentConfirm.innerHTML=modalData.content),"modal"===modalTarget&&fetch(modalData.src).then(t=>t.blob()).then(t=>{let e=new FileReader;e.onloadend=()=>{title.innerHTML=modalData.title,photo.setAttribute("title",""+modalData.title),photo.setAttribute("src",""+e.result)},e.readAsDataURL(t)})},openModal=async t=>{let e=document.documentElement;var l=getScrollbarWidth();l&&e.style.setProperty(scrollbarWidthCssVar,l+"px"),e.classList.add(isOpenClass,openingClass),await createContent(),setTimeout(()=>{visibleModal=t,e.classList.remove(openingClass)},animationDuration),t.showModal()},closeModal=t=>{modalData=null,visibleModal=null,modalTarget=null;let e=document.documentElement;e.classList.add(closingClass),setTimeout(()=>{e.classList.remove(closingClass,isOpenClass),e.style.removeProperty(scrollbarWidthCssVar),t.close()},animationDuration)},getScrollbarWidth=(document.addEventListener("click",t=>{null===visibleModal||visibleModal.querySelector("article").contains(t.target)||closeModal(visibleModal)}),document.addEventListener("keydown",t=>{"Escape"===t.key&&visibleModal&&closeModal(visibleModal)}),()=>window.innerWidth-document.documentElement.clientWidth),isScrollbarVisible=()=>document.body.scrollHeight>screen.height;